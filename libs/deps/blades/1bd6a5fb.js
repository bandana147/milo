function t(t,e,r,o){var s,i=arguments.length,n=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,r,o);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(n=(i<3?s(n):i>3?s(e,r,n):s(e,r))||n);return i>3&&n&&Object.defineProperty(e,r,n),n
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}const e=window,r=e.ShadowRoot&&(void 0===e.ShadyCSS||e.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,o=Symbol(),n=new WeakMap;class i{constructor(t,e,r){if(this._$cssResult$=!0,r!==o)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(r&&void 0===t){const r=void 0!==e&&1===e.length;r&&(t=n.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),r&&n.set(e,t))}return t}toString(){return this.cssText}}const s=t=>new i("string"==typeof t?t:t+"",void 0,o),a=(t,...e)=>{const r=1===t.length?t[0]:e.reduce(((e,r,o)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+t[o+1]),t[0]);return new i(r,t,o)},l=r?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const r of t.cssRules)e+=r.cssText;return s(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var c;const h=window,d=h.trustedTypes,u=d?d.emptyScript:"",p=h.reactiveElementPolyfillSupport,m={toAttribute(t,e){switch(e){case Boolean:t=t?u:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=null!==t;break;case Number:r=null===t?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch(t){r=null}}return r}},f=(t,e)=>e!==t&&(e==e||t==t),g={attribute:!0,type:String,converter:m,reflect:!1,hasChanged:f};class y extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(t){var e;this.finalize(),(null!==(e=this.h)&&void 0!==e?e:this.h=[]).push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,r)=>{const o=this._$Ep(r,e);void 0!==o&&(this._$Ev.set(o,r),t.push(o))})),t}static createProperty(t,e=g){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const r="symbol"==typeof t?Symbol():"__"+t,o=this.getPropertyDescriptor(t,r,e);void 0!==o&&Object.defineProperty(this.prototype,t,o)}}static getPropertyDescriptor(t,e,r){return{get(){return this[e]},set(o){const s=this[t];this[e]=o,this.requestUpdate(t,s,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||g}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),void 0!==t.h&&(this.h=[...t.h]),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const r of e)this.createProperty(r,t[r])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const r=new Set(t.flat(1/0).reverse());for(const t of r)e.unshift(l(t))}else void 0!==t&&e.push(l(t));return e}static _$Ep(t,e){const r=e.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof t?t.toLowerCase():void 0}u(){var t;this._$E_=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(t=this.constructor.h)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,r;(null!==(e=this._$ES)&&void 0!==e?e:this._$ES=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(r=t.hostConnected)||void 0===r||r.call(t))}removeController(t){var e;null===(e=this._$ES)||void 0===e||e.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this._$Ei.set(e,this[e]),delete this[e])}))}createRenderRoot(){var t;const o=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return((t,o)=>{r?t.adoptedStyleSheets=o.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):o.forEach((r=>{const o=document.createElement("style"),s=e.litNonce;void 0!==s&&o.setAttribute("nonce",s),o.textContent=r.cssText,t.appendChild(o)}))})(o,this.constructor.elementStyles),o}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)}))}attributeChangedCallback(t,e,r){this._$AK(t,r)}_$EO(t,e,r=g){var o;const s=this.constructor._$Ep(t,r);if(void 0!==s&&!0===r.reflect){const i=(void 0!==(null===(o=r.converter)||void 0===o?void 0:o.toAttribute)?r.converter:m).toAttribute(e,r.type);this._$El=t,null==i?this.removeAttribute(s):this.setAttribute(s,i),this._$El=null}}_$AK(t,e){var r;const o=this.constructor,s=o._$Ev.get(t);if(void 0!==s&&this._$El!==s){const t=o.getPropertyOptions(s),i="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==(null===(r=t.converter)||void 0===r?void 0:r.fromAttribute)?t.converter:m;this._$El=s,this[s]=i.fromAttribute(e,t.type),this._$El=null}}requestUpdate(t,e,r){let o=!0;void 0!==t&&(((r=r||this.constructor.getPropertyOptions(t)).hasChanged||f)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),!0===r.reflect&&this._$El!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,r))):o=!1),!this.isUpdatePending&&o&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((t,e)=>this[e]=t)),this._$Ei=void 0);let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(r)):this._$Ek()}catch(t){throw e=!1,this._$Ek(),t}e&&this._$AE(r)}willUpdate(t){}_$AE(t){var e;null===(e=this._$ES)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,e)=>this._$EO(e,this[e],t))),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var v;y.finalized=!0,y.elementProperties=new Map,y.elementStyles=[],y.shadowRootOptions={mode:"open"},null==p||p({ReactiveElement:y}),(null!==(c=h.reactiveElementVersions)&&void 0!==c?c:h.reactiveElementVersions=[]).push("1.6.1");const b=window,w=b.trustedTypes,_=w?w.createPolicy("lit-html",{createHTML:t=>t}):void 0,$="$lit$",M=`lit$${(Math.random()+"").slice(9)}$`,A="?"+M,x=`<${A}>`,E=document,C=()=>E.createComment(""),k=t=>null===t||"object"!=typeof t&&"function"!=typeof t,S=Array.isArray,P="[ \t\n\f\r]",R=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,T=/-->/g,N=/>/g,O=RegExp(`>|${P}(?:([^\\s"'>=/]+)(${P}*=${P}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),B=/'/g,L=/"/g,z=/^(?:script|style|textarea|title)$/i,j=(t,...e)=>({_$litType$:1,strings:t,values:e}),D=Symbol.for("lit-noChange"),U=Symbol.for("lit-nothing"),H=new WeakMap,I=E.createTreeWalker(E,129,null,!1),q=(t,e)=>{const r=t.length-1,o=[];let s,i=2===e?"<svg>":"",n=R;for(let e=0;e<r;e++){const r=t[e];let a,l,c=-1,h=0;for(;h<r.length&&(n.lastIndex=h,l=n.exec(r),null!==l);)h=n.lastIndex,n===R?"!--"===l[1]?n=T:void 0!==l[1]?n=N:void 0!==l[2]?(z.test(l[2])&&(s=RegExp("</"+l[2],"g")),n=O):void 0!==l[3]&&(n=O):n===O?">"===l[0]?(n=null!=s?s:R,c=-1):void 0===l[1]?c=-2:(c=n.lastIndex-l[2].length,a=l[1],n=void 0===l[3]?O:'"'===l[3]?L:B):n===L||n===B?n=O:n===T||n===N?n=R:(n=O,s=void 0);const d=n===O&&t[e+1].startsWith("/>")?" ":"";i+=n===R?r+x:c>=0?(o.push(a),r.slice(0,c)+$+r.slice(c)+M+d):r+M+(-2===c?(o.push(void 0),e):d)}const a=i+(t[r]||"<?>")+(2===e?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==_?_.createHTML(a):a,o]};class X{constructor({strings:t,_$litType$:e},r){let o;this.parts=[];let s=0,i=0;const n=t.length-1,a=this.parts,[l,c]=q(t,e);if(this.el=X.createElement(l,r),I.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(o=I.nextNode())&&a.length<n;){if(1===o.nodeType){if(o.hasAttributes()){const t=[];for(const e of o.getAttributeNames())if(e.endsWith($)||e.startsWith(M)){const r=c[i++];if(t.push(e),void 0!==r){const t=o.getAttribute(r.toLowerCase()+$).split(M),e=/([.?@])?(.*)/.exec(r);a.push({type:1,index:s,name:e[2],strings:t,ctor:"."===e[1]?F:"?"===e[1]?J:"@"===e[1]?K:Z})}else a.push({type:6,index:s})}for(const e of t)o.removeAttribute(e)}if(z.test(o.tagName)){const t=o.textContent.split(M),e=t.length-1;if(e>0){o.textContent=w?w.emptyScript:"";for(let r=0;r<e;r++)o.append(t[r],C()),I.nextNode(),a.push({type:2,index:++s});o.append(t[e],C())}}}else if(8===o.nodeType)if(o.data===A)a.push({type:2,index:s});else{let t=-1;for(;-1!==(t=o.data.indexOf(M,t+1));)a.push({type:7,index:s}),t+=M.length-1}s++}}static createElement(t,e){const r=E.createElement("template");return r.innerHTML=t,r}}function Y(t,e,r=t,o){var s,i,n,a;if(e===D)return e;let l=void 0!==o?null===(s=r._$Co)||void 0===s?void 0:s[o]:r._$Cl;const c=k(e)?void 0:e._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(i=null==l?void 0:l._$AO)||void 0===i||i.call(l,!1),void 0===c?l=void 0:(l=new c(t),l._$AT(t,r,o)),void 0!==o?(null!==(n=(a=r)._$Co)&&void 0!==n?n:a._$Co=[])[o]=l:r._$Cl=l),void 0!==l&&(e=Y(t,l._$AS(t,e.values),l,o)),e}class G{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var e;const{el:{content:r},parts:o}=this._$AD,s=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:E).importNode(r,!0);I.currentNode=s;let i=I.nextNode(),n=0,a=0,l=o[0];for(;void 0!==l;){if(n===l.index){let e;2===l.type?e=new W(i,i.nextSibling,this,t):1===l.type?e=new l.ctor(i,l.name,l.strings,this,t):6===l.type&&(e=new Q(i,this,t)),this._$AV.push(e),l=o[++a]}n!==(null==l?void 0:l.index)&&(i=I.nextNode(),n++)}return s}v(t){let e=0;for(const r of this._$AV)void 0!==r&&(void 0!==r.strings?(r._$AI(t,r,e),e+=r.strings.length-2):r._$AI(t[e])),e++}}class W{constructor(t,e,r,o){var s;this.type=2,this._$AH=U,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=r,this.options=o,this._$Cp=null===(s=null==o?void 0:o.isConnected)||void 0===s||s}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cp}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===(null==t?void 0:t.nodeType)&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=Y(this,t,e),k(t)?t===U||null==t||""===t?(this._$AH!==U&&this._$AR(),this._$AH=U):t!==this._$AH&&t!==D&&this._(t):void 0!==t._$litType$?this.g(t):void 0!==t.nodeType?this.$(t):(t=>S(t)||"function"==typeof(null==t?void 0:t[Symbol.iterator]))(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==U&&k(this._$AH)?this._$AA.nextSibling.data=t:this.$(E.createTextNode(t)),this._$AH=t}g(t){var e;const{values:r,_$litType$:o}=t,s="number"==typeof o?this._$AC(t):(void 0===o.el&&(o.el=X.createElement(o.h,this.options)),o);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===s)this._$AH.v(r);else{const t=new G(s,this),e=t.u(this.options);t.v(r),this.$(e),this._$AH=t}}_$AC(t){let e=H.get(t.strings);return void 0===e&&H.set(t.strings,e=new X(t)),e}T(t){S(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let r,o=0;for(const s of t)o===e.length?e.push(r=new W(this.k(C()),this.k(C()),this,this.options)):r=e[o],r._$AI(s),o++;o<e.length&&(this._$AR(r&&r._$AB.nextSibling,o),e.length=o)}_$AR(t=this._$AA.nextSibling,e){var r;for(null===(r=this._$AP)||void 0===r||r.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cp=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class Z{constructor(t,e,r,o,s){this.type=1,this._$AH=U,this._$AN=void 0,this.element=t,this.name=e,this._$AM=o,this.options=s,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=U}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,r,o){const s=this.strings;let i=!1;if(void 0===s)t=Y(this,t,e,0),i=!k(t)||t!==this._$AH&&t!==D,i&&(this._$AH=t);else{const o=t;let n,a;for(t=s[0],n=0;n<s.length-1;n++)a=Y(this,o[r+n],e,n),a===D&&(a=this._$AH[n]),i||(i=!k(a)||a!==this._$AH[n]),a===U?t=U:t!==U&&(t+=(null!=a?a:"")+s[n+1]),this._$AH[n]=a}i&&!o&&this.j(t)}j(t){t===U?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class F extends Z{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===U?void 0:t}}const V=w?w.emptyScript:"";class J extends Z{constructor(){super(...arguments),this.type=4}j(t){t&&t!==U?this.element.setAttribute(this.name,V):this.element.removeAttribute(this.name)}}class K extends Z{constructor(t,e,r,o,s){super(t,e,r,o,s),this.type=5}_$AI(t,e=this){var r;if((t=null!==(r=Y(this,t,e,0))&&void 0!==r?r:U)===D)return;const o=this._$AH,s=t===U&&o!==U||t.capture!==o.capture||t.once!==o.once||t.passive!==o.passive,i=t!==U&&(o===U||s);s&&this.element.removeEventListener(this.name,this,o),i&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,r;"function"==typeof this._$AH?this._$AH.call(null!==(r=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==r?r:this.element,t):this._$AH.handleEvent(t)}}class Q{constructor(t,e,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){Y(this,t)}}const tt=b.litHtmlPolyfillSupport;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var et,rt;null==tt||tt(X,W),(null!==(v=b.litHtmlVersions)&&void 0!==v?v:b.litHtmlVersions=[]).push("2.7.2");class ot extends y{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,e;const r=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=r.firstChild),r}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,r)=>{var o,s;const i=null!==(o=null==r?void 0:r.renderBefore)&&void 0!==o?o:e;let n=i._$litPart$;if(void 0===n){const t=null!==(s=null==r?void 0:r.renderBefore)&&void 0!==s?s:null;i._$litPart$=n=new W(e.insertBefore(C(),t),t,void 0,null!=r?r:{})}return n._$AI(t),n})(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!1)}render(){return D}}ot.finalized=!0,ot._$litElement$=!0,null===(et=globalThis.litElementHydrateSupport)||void 0===et||et.call(globalThis,{LitElement:ot});const nt=globalThis.litElementPolyfillSupport;null==nt||nt({LitElement:ot}),(null!==(rt=globalThis.litElementVersions)&&void 0!==rt?rt:globalThis.litElementVersions=[]).push("3.3.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const it=(t,e)=>"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(r){r.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(r){r.createProperty(e.key,t)}};function st(t){return(e,r)=>void 0!==r?((t,e,r)=>{e.constructor.createProperty(r,t)})(t,e,r):it(t,e)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}function at(t){return st({...t,state:!0})}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const lt=({finisher:t,descriptor:e})=>(r,o)=>{var s;if(void 0===o){const o=null!==(s=r.originalKey)&&void 0!==s?s:r.key,i=null!=e?{kind:"method",placement:"prototype",key:o,descriptor:e(r.key)}:{...r,key:o};return null!=t&&(i.finisher=function(e){t(e,o)}),i}{const s=r.constructor;void 0!==e&&Object.defineProperty(r,o,e(o)),null==t||t(s,o)}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;function ct(t,e){return lt({descriptor:r=>{const o={get(){var e,r;return null!==(r=null===(e=this.renderRoot)||void 0===e?void 0:e.querySelector(t))&&void 0!==r?r:null},enumerable:!0,configurable:!0};if(e){const e="symbol"==typeof r?Symbol():"__"+r;o.get=function(){var r,o;return void 0===this[e]&&(this[e]=null!==(o=null===(r=this.renderRoot)||void 0===r?void 0:r.querySelector(t))&&void 0!==o?o:null),this[e]}}return o}})}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var ht;const dt=null!=(null===(ht=window.HTMLSlotElement)||void 0===ht?void 0:ht.prototype.assignedElements)?(t,e)=>t.assignedElements(e):(t,e)=>t.assignedNodes(e).filter((t=>t.nodeType===Node.ELEMENT_NODE));function ut(t){const{slot:e,selector:r}=null!=t?t:{};return lt({descriptor:o=>({get(){var o;const s="slot"+(e?`[name=${e}]`:":not([name])"),i=null===(o=this.renderRoot)||void 0===o?void 0:o.querySelector(s),n=null!=i?dt(i,t):[];return r?n.filter((t=>t.matches(r))):n},enumerable:!0,configurable:!0})})}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const pt=1,mt=t=>(...e)=>({_$litDirective$:t,values:e});class ft{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,r){this._$Ct=t,this._$AM=e,this._$Ci=r}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const gt=mt(class extends ft{constructor(t){var e;if(super(t),1!==t.type||"class"!==t.name||(null===(e=t.strings)||void 0===e?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter((e=>t[e])).join(" ")+" "}update(t,[e]){var r,o;if(void 0===this.it){this.it=new Set,void 0!==t.strings&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter((t=>""!==t))));for(const t in e)e[t]&&!(null===(r=this.nt)||void 0===r?void 0:r.has(t))&&this.it.add(t);return this.render(e)}const s=t.element.classList;this.it.forEach((t=>{t in e||(s.remove(t),this.it.delete(t))}));for(const t in e){const r=!!e[t];r===this.it.has(t)||(null===(o=this.nt)||void 0===o?void 0:o.has(t))||(r?(s.add(t),this.it.add(t)):(s.remove(t),this.it.delete(t)))}return D}}),yt="important",vt=" !"+yt,bt=mt(class extends ft{constructor(t){var e;if(super(t),1!==t.type||"style"!==t.name||(null===(e=t.strings)||void 0===e?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,r)=>{const o=t[r];return null==o?e:e+`${r=r.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${o};`}),"")}update(t,[e]){const{style:r}=t.element;if(void 0===this.ut){this.ut=new Set;for(const t in e)this.ut.add(t);return this.render(e)}this.ut.forEach((t=>{null==e[t]&&(this.ut.delete(t),t.includes("-")?r.removeProperty(t):r[t]="")}));for(const t in e){const o=e[t];if(null!=o){this.ut.add(t);const e="string"==typeof o&&o.endsWith(vt);t.includes("-")||e?r.setProperty(t,e?o.slice(0,-11):o,e?yt:""):r[t]=o}}return D}});
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var wt="undefined"!=typeof Float32Array?Float32Array:Array;function _t(t,e,r){var o=e[0],s=e[1],i=e[2],n=e[3],a=e[4],l=e[5],c=e[6],h=e[7],d=e[8],u=r[0],p=r[1];return t[0]=o,t[1]=s,t[2]=i,t[3]=n,t[4]=a,t[5]=l,t[6]=u*o+p*n+c,t[7]=u*s+p*a+h,t[8]=u*i+p*l+d,t}function $t(){var t=new wt(2);return wt!=Float32Array&&(t[0]=0,t[1]=0),t}function Mt(t,e){var r=new wt(2);return r[0]=t,r[1]=e,r}function At(t,e,r){var o=e[0],s=e[1];return t[0]=r[0]*o+r[3]*s+r[6],t[1]=r[1]*o+r[4]*s+r[7],t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),$t();class xt{constructor(t=0,e=0,r=0,o=0){this.x0=t,this.y0=e,this.x1=r,this.y1=o}get width(){return this.x1-this.x0}get height(){return this.y1-this.y0}equals(t){return this.x0===t.x0&&this.y0===t.y0&&this.x1===t.x1&&this.y1===t.y1}unionWith(t){return this.x0=Math.min(this.x0,t.x0),this.y0=Math.min(this.y0,t.y0),this.x1=Math.max(this.x1,t.x1),this.y1=Math.max(this.y1,t.y1),this}static Union(t,e){return new xt(t.x0,t.y0,t.x1,t.y1).unionWith(e)}}async function Et(t,e,r,o,s){await new Promise((i=>{t.addEventListener("transitionend",(()=>{t.style.transition="",(null==s?void 0:s.endFn)&&s.endFn(),i()}),{once:!0});const n=(null==s?void 0:s.easing)||"";t.style.transition=`${e} ${n} ${r}ms`,o()}))}class Ct extends ot{setDocument(t){this.document=t}async animateOpacity(t,e,r){await Et(this.container,"opacity",t,(()=>{this.opacity=e}),r)}async animateMaskPosition(t,e,r,o){let s="mask-position";this.container.style.webkitMaskPosition&&(s="-webkit-mask-position"),console.log("animateMaskPosition:",s),await Et(this.container,s,t,(()=>{void 0!==e&&(this.maskOffsetX=e),void 0!==r&&(this.maskOffsetY=r)}),o)}constructor(){super(),this.slot="layers",this.layerType="layer",this.name="New Layer",this.visible=!0,this.opacity=1,this.blendMode="normal",this.maskUrl="",this.maskEnabled=!0,this.maskOffsetX=0,this.maskOffsetY=0}getStyles(){const t={"mix-blend-mode":this.blendMode,opacity:`${this.opacity||0===this.opacity?this.opacity:1}`};if(this.maskUrl&&this.maskEnabled){const e=`url(${this.maskUrl})`;t["mask-image"]=e,t["-webkit-mask-image"]=e;const r=`${this.maskOffsetX}px ${this.maskOffsetY}px`;t["mask-position"]=r,t["-webkit-mask-position"]=r,t["mask-repeat"]="no-repeat",t["-webkit-mask-repeat"]="no-repeat"}return this.visible||(t.display="none"),t}renderContent(){return j``}render(){const t=this.getStyles();return j` <div id="container" class="container" style="${bt(t)}"> ${this.renderContent()} </div> `}}Ct.styles=a`img#mask{display:none}`,t([st({reflect:!0})],Ct.prototype,"slot",void 0),t([st({attribute:"layer-type",reflect:!0})],Ct.prototype,"layerType",void 0),t([st({attribute:!1})],Ct.prototype,"name",void 0),t([st({attribute:!1})],Ct.prototype,"visible",void 0),t([st({reflect:!0})],Ct.prototype,"opacity",void 0),t([st({attribute:!1})],Ct.prototype,"blendMode",void 0),t([st({attribute:!1})],Ct.prototype,"maskUrl",void 0),t([st({attribute:!1})],Ct.prototype,"maskEnabled",void 0),t([st({attribute:!1})],Ct.prototype,"maskOffsetX",void 0),t([st({attribute:!1})],Ct.prototype,"maskOffsetY",void 0),t([ct("img#mask")],Ct.prototype,"maskElement",void 0),t([ct("#container")],Ct.prototype,"container",void 0);class kt extends Ct{set imageUrl(t){if(""!==t){const e=document.createElement("img");e.onload=async()=>{var t;await this.canvasPromise;const r=null===(t=this.canvasElement)||void 0===t?void 0:t.getContext("2d");if(!r)throw new Error("could not get context");this.width=e.width,this.height=e.height,r.drawImage(e,0,0),this.dispatchEvent(new Event("load",{composed:!0,bubbles:!0,cancelable:!0}))},e.src=t,this._imageUrl=t}else this.clear(),this.dispatchEvent(new Event("load",{composed:!0,bubbles:!0,cancelable:!0}))}get imageUrl(){return this._imageUrl}constructor(){super(),this._imageUrl="",this.editing=!1,this._width=0,this._height=0,this.tx=0,this.ty=0,this.layerReady=()=>{},this.canvasPromise=new Promise((t=>{this.layerReady=t}))}async animatePosition(t,e,r,o){await Et(this.container,"transform",t,(()=>{this.tx=e,this.ty=r}),o)}firstUpdated(t){if(super.firstUpdated(t),!this.canvasElement)throw new Error("expecting canvasElement");this.layerReady()}set width(t){const e=this._width;this._width=t,this.canvasElement.width=t,this.requestUpdate("width",e)}get width(){return this._width}set height(t){const e=this._height;this._height=t,this.canvasElement.height=t,this.requestUpdate("height",e)}get height(){return this._height}get editContext(){var t;return null===(t=this.editingCanvas)||void 0===t?void 0:t.getContext("2d")}clear(){var t;if(this.canvasElement){const e=null===(t=this.canvasElement)||void 0===t?void 0:t.getContext("2d");null==e||e.clearRect(0,0,this.width,this.height),this.tx=0,this.ty=0,this.width=0,this.height=0}}prepareEdit(){if(!this.document)throw new Error("no document");if(!this.editing||!this.editingCanvas)throw new Error("not ready for edits");(this.editingCanvas.width!==this.document.width||this.editingCanvas.height!==this.document.height)&&(this.editingCanvas.width=this.document.width,this.editingCanvas.height=this.document.height)}commitEdit(t){const e=this.editingCanvas,r=e.getContext("2d"),o=this.canvasElement.getContext("2d");if(0===this.width||0===this.height)this.tx=t.x0,this.ty=t.y0,this.width=t.width,this.height=t.height;else{const e=new xt(this.tx,this.ty,this.tx+this.width,this.ty+this.height),r=xt.Union(e,t);if(!e.equals(r)){const t=o.getImageData(0,0,this.width,this.height),s=e.x0-r.x0,i=e.y0-r.y0;this.tx=r.x0,this.ty=r.y0,this.width=r.width,this.height=r.height,o.putImageData(t,s,i)}}o.drawImage(e,-this.tx,-this.ty),r.clearRect(0,0,e.width,e.height)}renderContent(){const t=this.editing?j`<canvas id="editing" style="${`transform: translate(${-this.tx}px, ${-this.ty}px)`}"></canvas>`:U,e=j`<canvas id="pixels"></canvas>${t}`;let r;return""!==this.maskUrl&&(r=j`<img id="mask" src="${this.maskUrl}">`),j`${e}${r}`}eventToLocal(t){return this.viewToLocal(t.offsetX,t.offsetY)}viewToLocal(t,e){if(!this.document)throw Error("cannot transform without document");const r=this.document.viewToDocumentMatrix();_t(r,r,Mt(-this.tx*this.document.scale,-this.ty*this.document.scale));const o=$t();return At(o,Mt(t,e),r),o}getStyles(){const t=super.getStyles();return t.transform=`translate(${this.tx}px, ${this.ty}px)`,t.width=`${this.width}px`,t.height=`${this.height}px`,t}}function St(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pt(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Tt(t,e,"get"))}function Rt(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Tt(t,e,"set"),r),r}function Tt(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function Nt(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Ot(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Bt(t,e,r){Ot(t,e),e.set(t,r)}function Lt(t,e){Ot(t,e),e.add(t)}function zt(t,e){let r=t.length;Array.isArray(t[0])||(t=[t]),Array.isArray(e[0])||(e=e.map((t=>[t])));let o=e[0].length,s=e[0].map(((t,r)=>e.map((t=>t[r])))),i=t.map((t=>s.map((e=>{let r=0;if(!Array.isArray(t)){for(let o of e)r+=t*o;return r}for(let o=0;o<t.length;o++)r+=t[o]*(e[o]||0);return r}))));return 1===r&&(i=i[0]),1===o?i.map((t=>t[0])):i}function jt(t){return"string"===Dt(t)}function Dt(t){return(Object.prototype.toString.call(t).match(/^\[object\s+(.*?)\]$/)[1]||"").toLowerCase()}function Ut(t,e){t=+t,e=+e;let r=(Math.floor(t)+"").length;if(e>r)return+t.toFixed(e-r);{let o=10**(r-e);return Math.round(t/o)*o}}function Ht(t){if(!t)return;t=t.trim();const e=/^-?[\d.]+$/;let r=t.match(/^([a-z]+)\((.+?)\)$/i);if(r){let t=[];return r[2].replace(/\/?\s*([-\w.]+(?:%|deg)?)/g,((r,o)=>{/%$/.test(o)?(o=new Number(o.slice(0,-1)/100)).type="<percentage>":/deg$/.test(o)?((o=new Number(+o.slice(0,-3))).type="<angle>",o.unit="deg"):e.test(o)&&((o=new Number(o)).type="<number>"),r.startsWith("/")&&((o=o instanceof Number?o:new Number(o)).alpha=!0),t.push(o)})),{name:r[1].toLowerCase(),rawName:r[1],rawArgs:r[2],args:t}}}function It(t){return t[t.length-1]}function qt(t,e,r){return isNaN(t)?e:isNaN(e)?t:t+(e-t)*r}function Xt(t,e,r){return(r-t)/(e-t)}function Yt(t,e,r){return qt(e[0],e[1],Xt(t[0],t[1],r))}function Gt(t){return t.map((t=>t.split("|").map((t=>{let e=(t=t.trim()).match(/^(<[a-z]+>)\[(-?[.\d]+),\s*(-?[.\d]+)\]?$/);if(e){let t=new String(e[1]);return t.range=[+e[2],+e[3]],t}return t}))))}kt.styles=[Ct.styles,a`:host{display:block;width:min-content;height:min-content}canvas{position:absolute}img{display:block;pointer-events:none}img#mask{display:none}`],t([st({attribute:!1})],kt.prototype,"imageUrl",null),t([st({attribute:!1})],kt.prototype,"tx",void 0),t([st({attribute:!1})],kt.prototype,"ty",void 0),t([st({attribute:!1})],kt.prototype,"editing",void 0),t([ct("canvas#editing")],kt.prototype,"editingCanvas",void 0),t([ct("canvas#pixels")],kt.prototype,"canvasElement",void 0),t([st({type:Number,attribute:!1})],kt.prototype,"width",null),t([st({type:Number,attribute:!1})],kt.prototype,"height",null),window.customElements.define("ft-layer",kt);var Wt=Object.freeze({__proto__:null,isString:jt,type:Dt,toPrecision:Ut,parseFunction:Ht,last:It,interpolate:qt,interpolateInv:Xt,mapRange:Yt,parseCoordGrammar:Gt,multiplyMatrices:zt});const Zt=new class{add(t,e,r){if("string"==typeof arguments[0])(Array.isArray(t)?t:[t]).forEach((function(t){this[t]=this[t]||[],e&&this[t][r?"unshift":"push"](e)}),this);else for(var t in arguments[0])this.add(t,arguments[0][t],arguments[1])}run(t,e){this[t]=this[t]||[],this[t].forEach((function(t){t.call(e&&e.context?e.context:e,e)}))}};var Ft={gamut_mapping:"lch.c",precision:5,deltaE:"76"};const Vt={D50:[.3457/.3585,1,.2958/.3585],D65:[.3127/.329,1,.3583/.329]};function Jt(t){return Array.isArray(t)?t:Vt[t]}function Kt(t,e,r,o={}){if(t=Jt(t),e=Jt(e),!t||!e)throw new TypeError(`Missing white point to convert ${t?"":"from"}${t||e?"":"/"}${e?"":"to"}`);if(t===e)return r;let s={W1:t,W2:e,XYZ:r,options:o};if(Zt.run("chromatic-adaptation-start",s),s.M||(s.W1===Vt.D65&&s.W2===Vt.D50?s.M=[[1.0479298208405488,.022946793341019088,-.05019222954313557],[.029627815688159344,.990434484573249,-.01707382502938514],[-.009243058152591178,.015055144896577895,.7518742899580008]]:s.W1===Vt.D50&&s.W2===Vt.D65&&(s.M=[[.9554734527042182,-.023098536874261423,.0632593086610217],[-.028369706963208136,1.0099954580058226,.021041398966943008],[.012314001688319899,-.020507696433477912,1.3303659366080753]])),Zt.run("chromatic-adaptation-end",s),s.M)return zt(s.M,s.XYZ);throw new TypeError("Only Bradford CAT with white points D50 and D65 supported for now.")}var Qt=new WeakSet,te=new WeakMap,ee=new WeakSet;class re{constructor(t){Lt(this,ee),Lt(this,Qt),Bt(this,te,{writable:!0,value:void 0}),this.id=t.id,this.name=t.name,this.base=t.base?re.get(t.base):null,this.aliases=t.aliases,this.base&&(this.fromBase=t.fromBase,this.toBase=t.toBase);let e=t.coords??this.base.coords;this.coords=e;let r=t.white??this.base.white??"D65";this.white=Jt(r),this.formats=t.formats??{};for(let t in this.formats){let e=this.formats[t];e.type||="function",e.name||=t}t.cssId&&!this.formats.functions?.color?(this.formats.color={id:t.cssId},Object.defineProperty(this,"cssId",{value:t.cssId})):this.formats?.color&&!this.formats?.color.id&&(this.formats.color.id=this.id),this.referred=t.referred,Rt(this,te,Nt(this,ee,ne).call(this).reverse()),Zt.run("colorspace-init-end",this)}inGamut(t,{epsilon:e=75e-6}={}){if(this.isPolar)return t=this.toBase(t),this.base.inGamut(t,{epsilon:e});let r=Object.values(this.coords);return t.every(((t,o)=>{let s=r[o];if("angle"!==s.type&&s.range){if(Number.isNaN(t))return!0;let[r,o]=s.range;return(void 0===r||t>=r-e)&&(void 0===o||t<=o+e)}return!0}))}get cssId(){return this.formats.functions?.color?.id||this.id}get isPolar(){for(let t in this.coords)if("angle"===this.coords[t].type)return!0;return!1}getFormat(t){if("object"==typeof t)return Nt(this,Qt,oe).call(this,t);let e;return e="default"===t?Object.values(this.formats)[0]:this.formats[t],e?(e=Nt(this,Qt,oe).call(this,e),e):null}to(t,e){if(1===arguments.length&&([t,e]=[t.space,t.coords]),this===(t=re.get(t)))return e;e=e.map((t=>Number.isNaN(t)?0:t));let r,o,s=Pt(this,te),i=Pt(t,te);for(let t=0;t<s.length&&s[t]===i[t];t++)r=s[t],o=t;if(!r)throw new Error(`Cannot convert between color spaces ${this} and ${t}: no connection space was found`);for(let t=s.length-1;t>o;t--)e=s[t].toBase(e);for(let t=o+1;t<i.length;t++)e=i[t].fromBase(e);return e}from(t,e){return 1===arguments.length&&([t,e]=[t.space,t.coords]),(t=re.get(t)).to(this,e)}toString(){return`${this.name} (${this.id})`}getMinCoords(){let t=[];for(let e in this.coords){let r=this.coords[e],o=r.range||r.refRange;t.push(o?.min??0)}return t}static get all(){return[...new Set(Object.values(re.registry))]}static register(t,e){if(1===arguments.length&&(t=(e=arguments[0]).id),e=this.get(e),this.registry[t]&&this.registry[t]!==e)throw new Error(`Duplicate color space registration: '${t}'`);if(this.registry[t]=e,1===arguments.length&&e.aliases)for(let t of e.aliases)this.register(t,e);return e}static get(t,...e){if(!t||t instanceof re)return t;if("string"===Dt(t)){let e=re.registry[t.toLowerCase()];if(!e)throw new TypeError(`No color space found with id = "${t}"`);return e}if(e.length)return re.get(...e);throw new TypeError(`${t} is not a valid color space`)}static resolveCoord(t,e){let r,o,s=Dt(t);if("string"===s?t.includes(".")?[r,o]=t.split("."):[r,o]=[,t]:Array.isArray(t)?[r,o]=t:(r=t.space,o=t.coordId),r=re.get(r),r||(r=e),!r)throw new TypeError(`Cannot resolve coordinate reference ${t}: No color space specified and relative references are not allowed here`);if(s=Dt(o),"number"===s||"string"===s&&o>=0){let t=Object.entries(r.coords)[o];if(t)return{space:r,id:t[0],index:o,...t[1]}}r=re.get(r);let i=o.toLowerCase(),n=0;for(let t in r.coords){let e=r.coords[t];if(t.toLowerCase()===i||e.name?.toLowerCase()===i)return{space:r,id:t,index:n,...e};n++}throw new TypeError(`No "${o}" coordinate found in ${r.name}. Its coordinates are: ${Object.keys(r.coords).join(", ")}`)}}function oe(t){if(t.coords&&!t.coordGrammar){t.type||="function",t.name||="color",t.coordGrammar=Gt(t.coords);let e=Object.entries(this.coords).map((([e,r],o)=>{let s=t.coordGrammar[o][0],i=r.range||r.refRange,n=s.range,a="";return"<percentage>"==s?(n=[0,100],a="%"):"<angle>"==s&&(a="deg"),{fromRange:i,toRange:n,suffix:a}}));t.serializeCoords=(t,r)=>t.map(((t,o)=>{let{fromRange:s,toRange:i,suffix:n}=e[o];return s&&i&&(t=Yt(s,i,t)),t=Ut(t,r),n&&(t+=n),t}))}return t}function ne(){let t=[this];for(let e=this;e=e.base;)t.push(e);return t}St(re,"registry",{}),St(re,"DEFAULT_FORMAT",{type:"functions",name:"color"});var ie=new re({id:"xyz-d65",name:"XYZ D65",coords:{x:{name:"X"},y:{name:"Y"},z:{name:"Z"}},white:"D65",formats:{color:{ids:["xyz-d65","xyz"]}},aliases:["xyz"]});class se extends re{constructor(t){t.coords||(t.coords={r:{range:[0,1],name:"Red"},g:{range:[0,1],name:"Green"},b:{range:[0,1],name:"Blue"}}),t.base||(t.base=ie),t.toXYZ_M&&t.fromXYZ_M&&(t.toBase??=e=>{let r=zt(t.toXYZ_M,e);return this.white!==this.base.white&&(r=Kt(this.white,this.base.white,r)),r},t.fromBase??=e=>(e=Kt(this.base.white,this.white,e),zt(t.fromXYZ_M,e))),t.referred??="display",super(t)}}function ae(t){let e={str:String(t)?.trim()};if(Zt.run("parse-start",e),e.color)return e.color;if(e.parsed=Ht(e.str),e.parsed){let t=e.parsed.name;if("color"===t){let t=e.parsed.args.shift(),r=e.parsed.rawArgs.indexOf("/")>0?e.parsed.args.pop():1;for(let o of re.all){let s=o.getFormat("color");if(s&&(t===s.id||s.ids?.includes(t))){let t=Object.keys(o.coords).length,s=Array(t).fill(0);return s.forEach(((t,r)=>s[r]=e.parsed.args[r]||0)),{spaceId:o.id,coords:s,alpha:r}}}let o="";if(t in re.registry){let e=re.registry[t].formats?.functions?.color?.id;e&&(o=`Did you mean color(${e})?`)}throw new TypeError(`Cannot parse color(${t}). `+(o||"Missing a plugin?"))}for(let r of re.all){let o=r.getFormat(t);if(o&&"function"===o.type){let s=1;(o.lastAlpha||It(e.parsed.args).alpha)&&(s=e.parsed.args.pop());let i=e.parsed.args;return o.coordGrammar&&Object.entries(r.coords).forEach((([e,r],s)=>{let n=o.coordGrammar[s],a=i[s]?.type;if(n=n.find((t=>t==a)),!n){let o=r.name||e;throw new TypeError(`${a} not allowed for ${o} in ${t}()`)}let l=n.range;"<percentage>"===a&&(l||=[0,1]);let c=r.range||r.refRange;l&&c&&(i[s]=Yt(l,c,i[s]))})),{spaceId:r.id,coords:i,alpha:s}}}}else for(let t of re.all)for(let r in t.formats){let o=t.formats[r];if("custom"!==o.type)continue;if(o.test&&!o.test(e.str))continue;let s=o.parse(e.str);if(s)return s.alpha??=1,s}throw new TypeError(`Could not parse ${t} as a color. Missing a plugin?`)}function le(t){if(!t)throw new TypeError("Empty color reference");jt(t)&&(t=ae(t));let e=t.space||t.spaceId;return e instanceof re||(t.space=re.get(e)),void 0===t.alpha&&(t.alpha=1),t}function ce(t,e){return(e=re.get(e)).from(t)}function he(t,e){let{space:r,index:o}=re.resolveCoord(e,t.space);return ce(t,r)[o]}function de(t,e,r){return e=re.get(e),t.coords=e.to(t.space,r),t}function ue(t,e,r){if(t=le(t),2===arguments.length&&"object"===Dt(arguments[1])){let e=arguments[1];for(let r in e)ue(t,r,e[r])}else{"function"==typeof r&&(r=r(he(t,e)));let{space:o,index:s}=re.resolveCoord(e,t.space),i=ce(t,o);i[s]=r,de(t,o,i)}return t}var pe=new re({id:"xyz-d50",name:"XYZ D50",white:"D50",base:ie,fromBase:t=>Kt(ie.white,"D50",t),toBase:t=>Kt("D50",ie.white,t),formats:{color:{}}});const me=24/116,fe=24389/27;let ge=Vt.D50;var ye=new re({id:"lab",name:"Lab",coords:{l:{refRange:[0,100],name:"L"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:ge,base:pe,fromBase(t){let e=t.map(((t,e)=>t/ge[e])).map((t=>t>.008856451679035631?Math.cbrt(t):(fe*t+16)/116));return[116*e[1]-16,500*(e[0]-e[1]),200*(e[1]-e[2])]},toBase(t){let e=[];return e[1]=(t[0]+16)/116,e[0]=t[1]/500+e[1],e[2]=e[1]-t[2]/200,[e[0]>me?Math.pow(e[0],3):(116*e[0]-16)/fe,t[0]>8?Math.pow((t[0]+16)/116,3):t[0]/fe,e[2]>me?Math.pow(e[2],3):(116*e[2]-16)/fe].map(((t,e)=>t*ge[e]))},formats:{lab:{coords:["<number> | <percentage>","<number>","<number>"]}}});function ve(t){return(t%360+360)%360}var be=new re({id:"lch",name:"LCH",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,150],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:ye,fromBase(t){let e,[r,o,s]=t;return e=Math.abs(o)<.02&&Math.abs(s)<.02?NaN:180*Math.atan2(s,o)/Math.PI,[r,Math.sqrt(o**2+s**2),ve(e)]},toBase(t){let[e,r,o]=t;return r<0&&(r=0),isNaN(o)&&(o=0),[e,r*Math.cos(o*Math.PI/180),r*Math.sin(o*Math.PI/180)]},formats:{lch:{coords:["<number> | <percentage>","<number>","<number> | <angle>"]}}});const we=25**7,_e=Math.PI,$e=180/_e,Me=_e/180;function Ae(t,e,{kL:r=1,kC:o=1,kH:s=1}={}){let[i,n,a]=ye.from(t),l=be.from(ye,[i,n,a])[1],[c,h,d]=ye.from(e),u=be.from(ye,[c,h,d])[1];l<0&&(l=0),u<0&&(u=0);let p=((l+u)/2)**7,m=.5*(1-Math.sqrt(p/(p+we))),f=(1+m)*n,g=(1+m)*h,y=Math.sqrt(f**2+a**2),v=Math.sqrt(g**2+d**2),b=0===f&&0===a?0:Math.atan2(a,f),w=0===g&&0===d?0:Math.atan2(d,g);b<0&&(b+=2*_e),w<0&&(w+=2*_e),b*=$e,w*=$e;let _,$=c-i,M=v-y,A=w-b,E=b+w,x=Math.abs(A);y*v==0?_=0:x<=180?_=A:A>180?_=A-360:A<-180?_=A+360:console.log("the unthinkable has happened");let C,k=2*Math.sqrt(v*y)*Math.sin(_*Me/2),S=(i+c)/2,P=(y+v)/2,R=Math.pow(P,7);C=y*v==0?E:x<=180?E/2:E<360?(E+360)/2:(E-360)/2;let T=(S-50)**2,U=1+.015*T/Math.sqrt(20+T),N=1+.045*P,O=1;O-=.17*Math.cos((C-30)*Me),O+=.24*Math.cos(2*C*Me),O+=.32*Math.cos((3*C+6)*Me),O-=.2*Math.cos((4*C-63)*Me);let z=1+.015*P*O,B=30*Math.exp(-1*((C-275)/25)**2),D=2*Math.sqrt(R/(R+we)),L=($/(r*U))**2;return L+=(M/(o*N))**2,L+=(k/(s*z))**2,L+=-1*Math.sin(2*B*Me)*D*(M/(o*N))*(k/(s*z)),Math.sqrt(L)}const xe=75e-6;function Ee(t,e=t.space,{epsilon:r=xe}={}){t=le(t),e=re.get(e);let o=t.coords;return e!==t.space&&(o=e.from(t)),e.inGamut(o,{epsilon:r})}function Ce(t){return{space:t.space,coords:t.coords.slice(),alpha:t.alpha}}function ke(t,{method:e=Ft.gamut_mapping,space:r=t.space}={}){if(jt(arguments[1])&&(r=arguments[1]),Ee(t,r=re.get(r),{epsilon:0}))return t;let o=Se(t,r);if("clip"!==e&&!Ee(t,r)){let s=ke(Ce(o),{method:"clip",space:r});if(Ae(t,s)>2){let t=re.resolveCoord(e),s=t.space,i=t.id,n=Se(o,s),a=.01,l=(t.range||t.refRange)[0],c=he(n,i);for(;c-l>a;){let t=Ce(n);t=ke(t,{space:r,method:"clip"}),Ae(n,t)-2<a?l=he(n,i):c=he(n,i),ue(n,i,(l+c)/2)}o=Se(n,r)}else o=s}if("clip"===e||!Ee(o,r,{epsilon:0})){let t=Object.values(r.coords).map((t=>t.range||[]));o.coords=o.coords.map(((e,r)=>{let[o,s]=t[r];return void 0!==o&&(e=Math.max(o,e)),void 0!==s&&(e=Math.min(e,s)),e}))}return r!==t.space&&(o=Se(o,t.space)),t.coords=o.coords,t}function Se(t,e,{inGamut:r}={}){t=le(t);let o=(e=re.get(e)).from(t),s={space:e,coords:o,alpha:t.alpha};return r&&(s=ke(s)),s}function Pe(t,{precision:e=Ft.precision,format:r="default",inGamut:o=!0,...s}={}){let i,n=r;r=(t=le(t)).space.getFormat(r)??t.space.getFormat("default")??re.DEFAULT_FORMAT,o||=r.toGamut;let a=t.coords;if(a=a.map((t=>t||0)),o&&!Ee(t)&&(a=ke(Ce(t),!0===o?void 0:o).coords),"custom"===r.type){if(s.precision=e,!r.serialize)throw new TypeError(`format ${n} can only be used to parse colors, not for serialization`);i=r.serialize(a,t.alpha,s)}else{let o=r.name||"color";r.serializeCoords?a=r.serializeCoords(a,e):null!==e&&(a=a.map((t=>Ut(t,e))));let s=[...a];if("color"===o){let e=r.id||r.ids?.[0]||t.space.id;s.unshift(e)}let n=t.alpha;null!==e&&(n=Ut(n,e));let l=t.alpha<1&&!r.noAlpha?`${r.commas?",":" /"} ${n}`:"";i=`${o}(${s.join(r.commas?", ":" ")}${l})`}return i}ke.returns="color",Se.returns="color";var Re=new se({id:"rec2020-linear",name:"Linear REC.2020",white:"D65",toXYZ_M:[[.6369580483012914,.14461690358620832,.1688809751641721],[.2627002120112671,.6779980715188708,.05930171646986196],[0,.028072693049087428,1.060985057710791]],fromXYZ_M:[[1.716651187971268,-.355670783776392,-.25336628137366],[-.666684351832489,1.616481236634939,.0157685458139111],[.017639857445311,-.042770613257809,.942103121235474]],formats:{color:{}}});const Te=1.09929682680944,Ne=.018053968510807;var Oe=new se({id:"rec2020",name:"REC.2020",base:Re,toBase:t=>t.map((function(t){return t<4.5*Ne?t/4.5:Math.pow((t+Te-1)/Te,1/.45)})),fromBase:t=>t.map((function(t){return t>=Ne?Te*Math.pow(t,.45)-(Te-1):4.5*t})),formats:{color:{}}}),Be=new se({id:"p3-linear",name:"Linear P3",white:"D65",toXYZ_M:[[.4865709486482162,.26566769316909306,.1982172852343625],[.2289745640697488,.6917385218365064,.079286914093745],[0,.04511338185890264,1.043944368900976]],fromXYZ_M:[[2.493496911941425,-.9313836179191239,-.40271078445071684],[-.8294889695615747,1.7626640603183463,.023624685841943577],[.03584583024378447,-.07617238926804182,.9568845240076872]]}),Le=new se({id:"srgb-linear",name:"Linear sRGB",white:"D65",toXYZ_M:[[.41239079926595934,.357584339383878,.1804807884018343],[.21263900587151027,.715168678767756,.07219231536073371],[.01933081871559182,.11919477979462598,.9505321522496607]],fromXYZ_M:[[3.2409699419045226,-1.537383177570094,-.4986107602930034],[-.9692436362808796,1.8759675015077202,.04155505740717559],[.05563007969699366,-.20397695888897652,1.0569715142428786]],formats:{color:{}}}),ze={aliceblue:[240/255,248/255,1],antiquewhite:[250/255,235/255,215/255],aqua:[0,1,1],aquamarine:[127/255,1,212/255],azure:[240/255,1,1],beige:[245/255,245/255,220/255],bisque:[1,228/255,196/255],black:[0,0,0],blanchedalmond:[1,235/255,205/255],blue:[0,0,1],blueviolet:[138/255,43/255,226/255],brown:[165/255,42/255,42/255],burlywood:[222/255,184/255,135/255],cadetblue:[95/255,158/255,160/255],chartreuse:[127/255,1,0],chocolate:[210/255,105/255,30/255],coral:[1,127/255,80/255],cornflowerblue:[100/255,149/255,237/255],cornsilk:[1,248/255,220/255],crimson:[220/255,20/255,60/255],cyan:[0,1,1],darkblue:[0,0,139/255],darkcyan:[0,139/255,139/255],darkgoldenrod:[184/255,134/255,11/255],darkgray:[169/255,169/255,169/255],darkgreen:[0,100/255,0],darkgrey:[169/255,169/255,169/255],darkkhaki:[189/255,183/255,107/255],darkmagenta:[139/255,0,139/255],darkolivegreen:[85/255,107/255,47/255],darkorange:[1,140/255,0],darkorchid:[.6,50/255,.8],darkred:[139/255,0,0],darksalmon:[233/255,150/255,122/255],darkseagreen:[143/255,188/255,143/255],darkslateblue:[72/255,61/255,139/255],darkslategray:[47/255,79/255,79/255],darkslategrey:[47/255,79/255,79/255],darkturquoise:[0,206/255,209/255],darkviolet:[148/255,0,211/255],deeppink:[1,20/255,147/255],deepskyblue:[0,191/255,1],dimgray:[105/255,105/255,105/255],dimgrey:[105/255,105/255,105/255],dodgerblue:[30/255,144/255,1],firebrick:[178/255,34/255,34/255],floralwhite:[1,250/255,240/255],forestgreen:[34/255,139/255,34/255],fuchsia:[1,0,1],gainsboro:[220/255,220/255,220/255],ghostwhite:[248/255,248/255,1],gold:[1,215/255,0],goldenrod:[218/255,165/255,32/255],gray:[128/255,128/255,128/255],green:[0,128/255,0],greenyellow:[173/255,1,47/255],grey:[128/255,128/255,128/255],honeydew:[240/255,1,240/255],hotpink:[1,105/255,180/255],indianred:[205/255,92/255,92/255],indigo:[75/255,0,130/255],ivory:[1,1,240/255],khaki:[240/255,230/255,140/255],lavender:[230/255,230/255,250/255],lavenderblush:[1,240/255,245/255],lawngreen:[124/255,252/255,0],lemonchiffon:[1,250/255,205/255],lightblue:[173/255,216/255,230/255],lightcoral:[240/255,128/255,128/255],lightcyan:[224/255,1,1],lightgoldenrodyellow:[250/255,250/255,210/255],lightgray:[211/255,211/255,211/255],lightgreen:[144/255,238/255,144/255],lightgrey:[211/255,211/255,211/255],lightpink:[1,182/255,193/255],lightsalmon:[1,160/255,122/255],lightseagreen:[32/255,178/255,170/255],lightskyblue:[135/255,206/255,250/255],lightslategray:[119/255,136/255,.6],lightslategrey:[119/255,136/255,.6],lightsteelblue:[176/255,196/255,222/255],lightyellow:[1,1,224/255],lime:[0,1,0],limegreen:[50/255,205/255,50/255],linen:[250/255,240/255,230/255],magenta:[1,0,1],maroon:[128/255,0,0],mediumaquamarine:[.4,205/255,170/255],mediumblue:[0,0,205/255],mediumorchid:[186/255,85/255,211/255],mediumpurple:[147/255,112/255,219/255],mediumseagreen:[60/255,179/255,113/255],mediumslateblue:[123/255,104/255,238/255],mediumspringgreen:[0,250/255,154/255],mediumturquoise:[72/255,209/255,.8],mediumvioletred:[199/255,21/255,133/255],midnightblue:[25/255,25/255,112/255],mintcream:[245/255,1,250/255],mistyrose:[1,228/255,225/255],moccasin:[1,228/255,181/255],navajowhite:[1,222/255,173/255],navy:[0,0,128/255],oldlace:[253/255,245/255,230/255],olive:[128/255,128/255,0],olivedrab:[107/255,142/255,35/255],orange:[1,165/255,0],orangered:[1,69/255,0],orchid:[218/255,112/255,214/255],palegoldenrod:[238/255,232/255,170/255],palegreen:[152/255,251/255,152/255],paleturquoise:[175/255,238/255,238/255],palevioletred:[219/255,112/255,147/255],papayawhip:[1,239/255,213/255],peachpuff:[1,218/255,185/255],peru:[205/255,133/255,63/255],pink:[1,192/255,203/255],plum:[221/255,160/255,221/255],powderblue:[176/255,224/255,230/255],purple:[128/255,0,128/255],rebeccapurple:[.4,.2,.6],red:[1,0,0],rosybrown:[188/255,143/255,143/255],royalblue:[65/255,105/255,225/255],saddlebrown:[139/255,69/255,19/255],salmon:[250/255,128/255,114/255],sandybrown:[244/255,164/255,96/255],seagreen:[46/255,139/255,87/255],seashell:[1,245/255,238/255],sienna:[160/255,82/255,45/255],silver:[192/255,192/255,192/255],skyblue:[135/255,206/255,235/255],slateblue:[106/255,90/255,205/255],slategray:[112/255,128/255,144/255],slategrey:[112/255,128/255,144/255],snow:[1,250/255,250/255],springgreen:[0,1,127/255],steelblue:[70/255,130/255,180/255],tan:[210/255,180/255,140/255],teal:[0,128/255,128/255],thistle:[216/255,191/255,216/255],tomato:[1,99/255,71/255],turquoise:[64/255,224/255,208/255],violet:[238/255,130/255,238/255],wheat:[245/255,222/255,179/255],white:[1,1,1],whitesmoke:[245/255,245/255,245/255],yellow:[1,1,0],yellowgreen:[154/255,205/255,50/255]};let je=Array(3).fill("<percentage> | <number>[0, 255]"),De=Array(3).fill("<number>[0, 255]");var Ue=new se({id:"srgb",name:"sRGB",base:Le,fromBase:t=>t.map((t=>{let e=t<0?-1:1,r=t*e;return r>.0031308?e*(1.055*r**(1/2.4)-.055):12.92*t})),toBase:t=>t.map((t=>{let e=t<0?-1:1,r=t*e;return r<.04045?t/12.92:e*((r+.055)/1.055)**2.4})),formats:{rgb:{coords:je},rgb_number:{name:"rgb",commas:!0,coords:De,noAlpha:!0},color:{},rgba:{coords:je,commas:!0,lastAlpha:!0},rgba_number:{name:"rgba",commas:!0,coords:De},hex:{type:"custom",toGamut:!0,test:t=>/^#([a-f0-9]{3,4}){1,2}$/i.test(t),parse(t){t.length<=5&&(t=t.replace(/[a-f0-9]/gi,"$&$&"));let e=[];return t.replace(/[a-f0-9]{2}/gi,(t=>{e.push(parseInt(t,16)/255)})),{spaceId:"srgb",coords:e.slice(0,3),alpha:e.slice(3)[0]}},serialize:(t,e,{collapse:r=!0}={})=>{e<1&&t.push(e),t=t.map((t=>Math.round(255*t)));let o=r&&t.every((t=>t%17==0)),s=t.map((t=>o?(t/17).toString(16):t.toString(16).padStart(2,"0"))).join("");return"#"+s}},keyword:{type:"custom",test:t=>/^[a-z]+$/i.test(t),parse(t){let e={spaceId:"srgb",coords:null,alpha:1};if("transparent"===(t=t.toLowerCase())?(e.coords=ze.black,e.alpha=0):e.coords=ze[t],e.coords)return e}}}}),He=new se({id:"p3",name:"P3",base:Be,fromBase:Ue.fromBase,toBase:Ue.toBase,formats:{color:{id:"display-p3"}}});if(Ft.display_space=Ue,"undefined"!=typeof CSS&&CSS.supports)for(let t of[ye,Oe,He]){let e=t.getMinCoords(),r=Pe({space:t,coords:e,alpha:1});if(CSS.supports("color",r)){Ft.display_space=t;break}}function Ie(t,e,r="lab"){let o=(r=re.get(r)).from(t),s=r.from(e);return Math.sqrt(o.reduce(((t,e,r)=>{let o=s[r];return isNaN(e)||isNaN(o)?t:t+(o-e)**2}),0))}function qe(t){return he(t,[ie,"y"])}function Xe(t,e){ue(t,[ie,"y"],e)}var Ye=Object.freeze({__proto__:null,getLuminance:qe,setLuminance:Xe,register:function(t){Object.defineProperty(t.prototype,"luminance",{get(){return qe(this)},set(t){Xe(this,t)}})}});const Ge=.022,We=1.414;function Ze(t){return t>=Ge?t:t+(Ge-t)**We}function Fe(t){let e=t<0?-1:1,r=Math.abs(t);return e*Math.pow(r,2.4)}const Ve=24/116,Je=24389/27;let Ke=Vt.D65;var Qe=new re({id:"lab-d65",name:"Lab D65",coords:{l:{refRange:[0,100],name:"L"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:Ke,base:ie,fromBase(t){let e=t.map(((t,e)=>t/Ke[e])).map((t=>t>.008856451679035631?Math.cbrt(t):(Je*t+16)/116));return[116*e[1]-16,500*(e[0]-e[1]),200*(e[1]-e[2])]},toBase(t){let e=[];return e[1]=(t[0]+16)/116,e[0]=t[1]/500+e[1],e[2]=e[1]-t[2]/200,[e[0]>Ve?Math.pow(e[0],3):(116*e[0]-16)/Je,t[0]>8?Math.pow((t[0]+16)/116,3):t[0]/Je,e[2]>Ve?Math.pow(e[2],3):(116*e[2]-16)/Je].map(((t,e)=>t*Ke[e]))},formats:{"lab-d65":{coords:["<number> | <percentage>","<number>","<number>"]}}});const tr=.5*Math.pow(5,.5)+.5;var er=Object.freeze({__proto__:null,contrastWCAG21:function(t,e){t=le(t),e=le(e);let r=Math.max(qe(t),0),o=Math.max(qe(e),0);return o>r&&([r,o]=[o,r]),(r+.05)/(o+.05)},contrastAPCA:function(t,e){let r,o,s,i,n,a;e=le(e),t=le(t),e=Se(e,"srgb"),[i,n,a]=e.coords;let l=.2126729*Fe(i)+.7151522*Fe(n)+.072175*Fe(a);t=Se(t,"srgb"),[i,n,a]=t.coords;let c=.2126729*Fe(i)+.7151522*Fe(n)+.072175*Fe(a),h=Ze(l),d=Ze(c),u=d>h;return Math.abs(d-h)<5e-4?o=0:u?(r=d**.56-h**.57,o=1.14*r):(r=d**.65-h**.62,o=1.14*r),s=Math.abs(o)<.1?0:o>0?o-.027:o+.027,100*s},contrastMichelson:function(t,e){t=le(t),e=le(e);let r=Math.max(qe(t),0),o=Math.max(qe(e),0);o>r&&([r,o]=[o,r]);let s=r+o;return 0===s?0:(r-o)/s},contrastWeber:function(t,e){t=le(t),e=le(e);let r=Math.max(qe(t),0),o=Math.max(qe(e),0);return o>r&&([r,o]=[o,r]),0===o?5e4:(r-o)/o},contrastLstar:function(t,e){t=le(t),e=le(e);let r=he(t,[ye,"l"]),o=he(e,[ye,"l"]);return Math.abs(r-o)},contrastDeltaPhi:function(t,e){t=le(t),e=le(e);let r=he(t,[Qe,"l"]),o=he(e,[Qe,"l"]),s=Math.abs(Math.pow(r,tr)-Math.pow(o,tr)),i=Math.pow(s,1/tr)*Math.SQRT2-40;return i<7.5?0:i}});function rr(t){let[e,r,o]=ce(t,ie),s=e+15*r+3*o;return[4*e/s,9*r/s]}function or(t){let[e,r,o]=ce(t,ie),s=e+r+o;return[e/s,r/s]}var nr=Object.freeze({__proto__:null,uv:rr,xy:or,register:function(t){Object.defineProperty(t.prototype,"uv",{get(){return rr(this)}}),Object.defineProperty(t.prototype,"xy",{get(){return or(this)}})}});const ir=Math.PI/180;var sr=new re({id:"xyz-abs-d65",name:"Absolute XYZ D65",coords:{x:{refRange:[0,9504.7],name:"Xa"},y:{refRange:[0,1e4],name:"Ya"},z:{refRange:[0,10888.3],name:"Za"}},base:ie,fromBase:t=>t.map((t=>Math.max(203*t,0))),toBase:t=>t.map((t=>Math.max(t/203,0)))});const ar=1.15,lr=.66,cr=2610/16384,hr=.8359375,dr=2413/128,ur=18.6875,pr=32/(1.7*2523),mr=-.56,fr=16295499532821565e-27,gr=[[.41478972,.579999,.014648],[-.20151,1.120649,.0531008],[-.0166008,.2648,.6684799]],yr=[[1.9242264357876067,-1.0047923125953657,.037651404030618],[.35031676209499907,.7264811939316552,-.06538442294808501],[-.09098281098284752,-.3127282905230739,1.5227665613052603]],vr=[[.5,.5,0],[3.524,-4.066708,.542708],[.199076,1.096799,-1.295875]],br=[[1,.1386050432715393,.05804731615611886],[.9999999999999999,-.1386050432715393,-.05804731615611886],[.9999999999999998,-.09601924202631895,-.8118918960560388]];var wr=new re({id:"jzazbz",name:"Jzazbz",coords:{jz:{refRange:[0,1],name:"Jz"},az:{refRange:[-.5,.5]},bz:{refRange:[-.5,.5]}},base:sr,fromBase(t){let[e,r,o]=t,s=zt(gr,[ar*e-(ar-1)*o,lr*r-(lr-1)*e,o]).map((function(t){return((hr+dr*(t/1e4)**cr)/(1+ur*(t/1e4)**cr))**134.03437499999998})),[i,n,a]=zt(vr,s);return[(1+mr)*i/(1+mr*i)-fr,n,a]},toBase(t){let[e,r,o]=t,s=zt(br,[(e+fr)/(1+mr-mr*(e+fr)),r,o]).map((function(t){return 1e4*((hr-t**pr)/(ur*t**pr-dr))**6.277394636015326})),[i,n,a]=zt(yr,s),l=(i+(ar-1)*a)/ar;return[l,(n+(lr-1)*l)/lr,a]},formats:{color:{}}}),_r=new re({id:"jzczhz",name:"JzCzHz",coords:{jz:{refRange:[0,1],name:"Jz"},cz:{refRange:[0,1],name:"Chroma"},hz:{refRange:[0,360],type:"angle",name:"Hue"}},base:wr,fromBase(t){let e,[r,o,s]=t;const i=2e-4;return e=Math.abs(o)<i&&Math.abs(s)<i?NaN:180*Math.atan2(s,o)/Math.PI,[r,Math.sqrt(o**2+s**2),ve(e)]},toBase:t=>[t[0],t[1]*Math.cos(t[2]*Math.PI/180),t[1]*Math.sin(t[2]*Math.PI/180)],formats:{color:{}}});const $r=.8359375,Mr=2413/128,Ar=18.6875,xr=2610/16384,Er=2523/32,Cr=16384/2610,kr=32/2523,Sr=[[.3592,.6976,-.0358],[-.1922,1.1004,.0755],[.007,.0749,.8434]],Pr=[[.5,.5,0],[6610/4096,-13613/4096,7003/4096],[17933/4096,-17390/4096,-543/4096]],Rr=[[.9999888965628402,.008605050147287059,.11103437159861648],[1.00001110343716,-.008605050147287059,-.11103437159861648],[1.0000320633910054,.56004913547279,-.3206339100541203]],Tr=[[2.0701800566956137,-1.326456876103021,.20661600684785517],[.3649882500326575,.6804673628522352,-.04542175307585323],[-.04959554223893211,-.04942116118675749,1.1879959417328034]];var Nr=new re({id:"ictcp",name:"ICTCP",coords:{i:{refRange:[0,1],name:"I"},ct:{refRange:[-.5,.5],name:"CT"},cp:{refRange:[-.5,.5],name:"CP"}},base:sr,fromBase:t=>function(t){let e=t.map((function(t){return(($r+Mr*(t/1e4)**xr)/(1+Ar*(t/1e4)**xr))**Er}));return zt(Pr,e)}(zt(Sr,t)),toBase(t){let e=function(t){return zt(Rr,t).map((function(t){return 1e4*(Math.max(t**kr-$r,0)/(Mr-Ar*t**kr))**Cr}))}(t);return zt(Tr,e)},formats:{color:{}}});const Or=[[.8190224432164319,.3619062562801221,-.12887378261216414],[.0329836671980271,.9292868468965546,.03614466816999844],[.048177199566046255,.26423952494422764,.6335478258136937]],Br=[[1.2268798733741557,-.5578149965554813,.28139105017721583],[-.04057576262431372,1.1122868293970594,-.07171106666151701],[-.07637294974672142,-.4214933239627914,1.5869240244272418]],Lr=[[.2104542553,.793617785,-.0040720468],[1.9779984951,-2.428592205,.4505937099],[.0259040371,.7827717662,-.808675766]],zr=[[.9999999984505198,.39633779217376786,.2158037580607588],[1.0000000088817609,-.10556134232365635,-.06385417477170591],[1.0000000546724108,-.08948418209496575,-1.2914855378640917]];var jr=new re({id:"oklab",name:"OKLab",coords:{l:{refRange:[0,1],name:"L"},a:{refRange:[-.4,.4]},b:{refRange:[-.4,.4]}},white:"D65",base:ie,fromBase(t){let e=zt(Or,t).map((t=>Math.cbrt(t)));return zt(Lr,e)},toBase(t){let e=zt(zr,t).map((t=>t**3));return zt(Br,e)},formats:{oklab:{coords:["<number> | <percentage>","<number>","<number>"]}}}),Dr=Object.freeze({__proto__:null,deltaE76:function(t,e){return Ie(t,e,"lab")},deltaECMC:function(t,e,{l:r=2,c:o=1}={}){let[s,i,n]=ye.from(t),[,a,l]=be.from(ye,[s,i,n]),[c,h,d]=ye.from(e),u=be.from(ye,[c,h,d])[1];a<0&&(a=0),u<0&&(u=0);let p=s-c,m=a-u,f=(i-h)**2+(n-d)**2-m**2,g=.511;s>=16&&(g=.040975*s/(1+.01765*s));let y,v=.0638*a/(1+.0131*a)+.638;Number.isNaN(l)&&(l=0),y=l>=164&&l<=345?.56+Math.abs(.2*Math.cos((l+168)*ir)):.36+Math.abs(.4*Math.cos((l+35)*ir));let b=Math.pow(a,4),w=Math.sqrt(b/(b+1900)),_=(p/(r*g))**2;return _+=(m/(o*v))**2,_+=f/(v*(w*y+1-w))**2,Math.sqrt(_)},deltaE2000:Ae,deltaEJz:function(t,e){let[r,o,s]=_r.from(t),[i,n,a]=_r.from(e),l=r-i,c=o-n;Number.isNaN(s)&&Number.isNaN(a)?(s=0,a=0):Number.isNaN(s)?s=a:Number.isNaN(a)&&(a=s);let h=s-a,d=2*Math.sqrt(o*n)*Math.sin(h/2*(Math.PI/180));return Math.sqrt(l**2+c**2+d**2)},deltaEITP:function(t,e){let[r,o,s]=Nr.from(t),[i,n,a]=Nr.from(e);return 720*Math.sqrt((r-i)**2+.25*(o-n)**2+(s-a)**2)},deltaEOK:function(t,e){let[r,o,s]=jr.from(t),[i,n,a]=jr.from(e),l=r-i,c=o-n,h=s-a;return Math.sqrt(l**2+c**2+h**2)}});function Ur(t,e,r={}){jt(r)&&(r={method:r});let{method:o=Ft.deltaE,...s}=r;t=le(t),e=le(e);for(let r in Dr)if("deltae"+o.toLowerCase()===r.toLowerCase())return Dr[r](t,e,s);throw new TypeError(`Unknown deltaE method: ${o}`)}var Hr=Object.freeze({__proto__:null,lighten:function(t,e=.25){return ue(t,[re.get("oklch","lch"),"l"],(t=>t*(1+e)))},darken:function(t,e=.25){return ue(t,[re.get("oklch","lch"),"l"],(t=>t*(1-e)))}});function Ir(t,e,r=.5,o={}){[t,e]=[le(t),le(e)],"object"===Dt(r)&&([r,o]=[.5,r]);let{space:s,outputSpace:i,premultiplied:n}=o;return Xr(t,e,{space:s,outputSpace:i,premultiplied:n})(r)}function qr(t,e,r={}){let o;Yr(t)&&([o,r]=[t,e],[t,e]=o.rangeArgs.colors);let{maxDeltaE:s,deltaEMethod:i,steps:n=2,maxSteps:a=1e3,...l}=r;o||([t,e]=[le(t),le(e)],o=Xr(t,e,l));let c=Ur(t,e),h=s>0?Math.max(n,Math.ceil(c/s)+1):n,d=[];if(void 0!==a&&(h=Math.min(h,a)),1===h)d=[{p:.5,color:o(.5)}];else{let t=1/(h-1);d=Array.from({length:h},((e,r)=>{let s=r*t;return{p:s,color:o(s)}}))}if(s>0){let t=d.reduce(((t,e,r)=>{if(0===r)return 0;let o=Ur(e.color,d[r-1].color,i);return Math.max(t,o)}),0);for(;t>s;){t=0;for(let e=1;e<d.length&&d.length<a;e++){let r=d[e-1],s=d[e],i=(s.p+r.p)/2,n=o(i);t=Math.max(t,Ur(n,r.color),Ur(n,s.color)),d.splice(e,0,{p:i,color:o(i)}),e++}}}return d=d.map((t=>t.color)),d}function Xr(t,e,r={}){if(Yr(t)){let[r,o]=[t,e];return Xr(...r.rangeArgs.colors,{...r.rangeArgs.options,...o})}let{space:o,outputSpace:s,progression:i,premultiplied:n}=r;t=le(t),e=le(e),t=Ce(t),e=Ce(e);let a={colors:[t,e],options:r};if(o=o?re.get(o):re.registry[Ft.interpolationSpace]||t.space,s=s?re.get(s):o,t=Se(t,o),e=Se(e,o),t=ke(t),e=ke(e),o.coords.h&&"angle"===o.coords.h.type){let s=r.hue=r.hue||"shorter",i=[o,"h"],[n,a]=[he(t,i),he(e,i)];[n,a]=function(t,e){if("raw"===t)return e;let[r,o]=e.map(ve),s=o-r;return"increasing"===t?s<0&&(o+=360):"decreasing"===t?s>0&&(r+=360):"longer"===t?-180<s&&s<180&&(s>0?o+=360:r+=360):"shorter"===t&&(s>180?r+=360:s<-180&&(o+=360)),[r,o]}(s,[n,a]),ue(t,i,n),ue(e,i,a)}return n&&(t.coords=t.coords.map((e=>e*t.alpha)),e.coords=e.coords.map((t=>t*e.alpha))),Object.assign((r=>{r=i?i(r):r;let a=t.coords.map(((t,o)=>qt(t,e.coords[o],r))),l=qt(t.alpha,e.alpha,r),c={space:o,coords:a,alpha:l};return n&&(c.coords=c.coords.map((t=>t/l))),s!==o&&(c=Se(c,s)),c}),{rangeArgs:a})}function Yr(t){return"function"===Dt(t)&&!!t.rangeArgs}Ft.interpolationSpace="lab";var Gr=Object.freeze({__proto__:null,mix:Ir,steps:qr,range:Xr,isRange:Yr,register:function(t){t.defineFunction("mix",Ir,{returns:"color"}),t.defineFunction("range",Xr,{returns:"function<color>"}),t.defineFunction("steps",qr,{returns:"array<color>"})}}),Wr=new re({id:"hsl",name:"HSL",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:Ue,fromBase:t=>{let e=Math.max(...t),r=Math.min(...t),[o,s,i]=t,[n,a,l]=[NaN,0,(r+e)/2],c=e-r;if(0!==c){switch(a=0===l||1===l?0:(e-l)/Math.min(l,1-l),e){case o:n=(s-i)/c+(s<i?6:0);break;case s:n=(i-o)/c+2;break;case i:n=(o-s)/c+4}n*=60}return[n,100*a,100*l]},toBase:t=>{let[e,r,o]=t;function s(t){let s=(t+e/30)%12,i=r*Math.min(o,1-o);return o-i*Math.max(-1,Math.min(s-3,9-s,1))}return e%=360,e<0&&(e+=360),r/=100,o/=100,[s(0),s(8),s(4)]},formats:{hsl:{toGamut:!0,coords:["<number> | <angle>","<percentage>","<percentage>"]},hsla:{coords:["<number> | <angle>","<percentage>","<percentage>"],commas:!0,lastAlpha:!0}}}),Zr=new re({id:"hsv",name:"HSV",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},v:{range:[0,100],name:"Value"}},base:Wr,fromBase(t){let[e,r,o]=t;r/=100,o/=100;let s=o+r*Math.min(o,1-o);return[e,0===s?0:200*(1-o/s),100*s]},toBase(t){let[e,r,o]=t;r/=100,o/=100;let s=o*(1-r/2);return[e,0===s||1===s?0:(o-s)/Math.min(s,1-s)*100,100*s]},formats:{color:{toGamut:!0}}}),Fr=new re({id:"hwb",name:"HWB",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},w:{range:[0,100],name:"Whiteness"},b:{range:[0,100],name:"Blackness"}},base:Zr,fromBase(t){let[e,r,o]=t;return[e,o*(100-r)/100,100-o]},toBase(t){let[e,r,o]=t;r/=100,o/=100;let s=r+o;if(s>=1)return[e,0,r/s*100];let i=1-o;return[e,100*(0===i?0:1-r/i),100*i]},formats:{hwb:{toGamut:!0,coords:["<number> | <angle>","<percentage>","<percentage>"]}}}),Vr=new se({id:"a98rgb-linear",name:"Linear Adobe 98 RGB compatible",white:"D65",toXYZ_M:[[.5766690429101305,.1855582379065463,.1882286462349947],[.29734497525053605,.6273635662554661,.07529145849399788],[.02703136138641234,.07068885253582723,.9913375368376388]],fromXYZ_M:[[2.0415879038107465,-.5650069742788596,-.34473135077832956],[-.9692436362808795,1.8759675015077202,.04155505740717557],[.013444280632031142,-.11836239223101838,1.0151749943912054]]}),Jr=new se({id:"a98rgb",name:"Adobe 98 RGB compatible",base:Vr,toBase:t=>t.map((t=>Math.pow(Math.abs(t),563/256)*Math.sign(t))),fromBase:t=>t.map((t=>Math.pow(Math.abs(t),256/563)*Math.sign(t))),formats:{color:{id:"a98-rgb"}}}),Kr=new se({id:"prophoto-linear",name:"Linear ProPhoto",white:"D50",base:pe,toXYZ_M:[[.7977604896723027,.13518583717574031,.0313493495815248],[.2880711282292934,.7118432178101014,8565396060525902e-20],[0,0,.8251046025104601]],fromXYZ_M:[[1.3457989731028281,-.25558010007997534,-.05110628506753401],[-.5446224939028347,1.5082327413132781,.02053603239147973],[0,0,1.2119675456389454]]}),Qr=new se({id:"prophoto",name:"ProPhoto",base:Kr,toBase:t=>t.map((t=>t<.03125?t/16:t**1.8)),fromBase:t=>t.map((t=>t>=.001953125?t**(1/1.8):16*t)),formats:{color:{id:"prophoto-rgb"}}}),to=new re({id:"oklch",name:"OKLCh",coords:{l:{refRange:[0,1],name:"Lightness"},c:{refRange:[0,.4],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},white:"D65",base:jr,fromBase(t){let e,[r,o,s]=t;const i=2e-4;return e=Math.abs(o)<i&&Math.abs(s)<i?NaN:180*Math.atan2(s,o)/Math.PI,[r,Math.sqrt(o**2+s**2),ve(e)]},toBase(t){let e,r,[o,s,i]=t;return isNaN(i)?(e=0,r=0):(e=s*Math.cos(i*Math.PI/180),r=s*Math.sin(i*Math.PI/180)),[o,e,r]},formats:{oklch:{coords:["<number> | <percentage>","<number>","<number> | <angle>"]}}});const eo=2610/16384,ro=32/2523,oo=.8359375,no=2413/128,io=18.6875;var so=new se({id:"rec2100pq",name:"REC.2100-PQ",base:Re,toBase:t=>t.map((function(t){return 1e4*(Math.max(t**ro-oo,0)/(no-io*t**ro))**6.277394636015326/203})),fromBase:t=>t.map((function(t){let e=Math.max(203*t/1e4,0);return((oo+no*e**eo)/(1+io*e**eo))**78.84375})),formats:{color:{id:"rec2100-pq"}}});const ao=.17883277,lo=.28466892,co=.55991073,ho=3.7743;var uo=new se({id:"rec2100hlg",cssid:"rec2100-hlg",name:"REC.2100-HLG",referred:"scene",base:Re,toBase:t=>t.map((function(t){return t<=.5?t**2/3*ho:Math.exp((t-co)/ao+lo)/12*ho})),fromBase:t=>t.map((function(t){return(t/=ho)<=1/12?Math.sqrt(3*t):ao*Math.log(12*t-lo)+co})),formats:{color:{id:"rec2100-hlg"}}});const po={};function mo({id:t,toCone_M:e,fromCone_M:r}){po[t]=arguments[0]}function fo(t,e,r="Bradford"){let o=po[r],[s,i,n]=zt(o.toCone_M,t),[a,l,c]=zt(o.toCone_M,e),h=zt([[a/s,0,0],[0,l/i,0],[0,0,c/n]],o.toCone_M);return zt(o.fromCone_M,h)}Zt.add("chromatic-adaptation-start",(t=>{t.options.method&&(t.M=fo(t.W1,t.W2,t.options.method))})),Zt.add("chromatic-adaptation-end",(t=>{t.M||(t.M=fo(t.W1,t.W2,t.options.method))})),mo({id:"von Kries",toCone_M:[[.40024,.7076,-.08081],[-.2263,1.16532,.0457],[0,0,.91822]],fromCone_M:[[1.8599364,-1.1293816,.2198974],[.3611914,.6388125,-64e-7],[0,0,1.0890636]]}),mo({id:"Bradford",toCone_M:[[.8951,.2664,-.1614],[-.7502,1.7135,.0367],[.0389,-.0685,1.0296]],fromCone_M:[[.9869929,-.1470543,.1599627],[.4323053,.5183603,.0492912],[-.0085287,.0400428,.9684867]]}),mo({id:"CAT02",toCone_M:[[.7328,.4296,-.1624],[-.7036,1.6975,.0061],[.003,.0136,.9834]],fromCone_M:[[1.0961238,-.278869,.1827452],[.454369,.4735332,.0720978],[-.0096276,-.005698,1.0153256]]}),mo({id:"CAT16",toCone_M:[[.401288,.650173,-.051461],[-.250268,1.204414,.045854],[-.002079,.048952,.953127]],fromCone_M:[[1.862067855087233,-1.011254630531685,.1491867754444518],[.3875265432361372,.6214474419314753,-.008973985167612518],[-.01584149884933386,-.03412293802851557,1.04996443687785]]}),Object.assign(Vt,{A:[1.0985,1,.35585],C:[.98074,1,1.18232],D55:[.95682,1,.92149],D75:[.94972,1,1.22638],E:[1,1,1],F2:[.99186,1,.67393],F7:[.95041,1,1.08747],F11:[1.00962,1,.6435]}),Vt.ACES=[.32168/.33767,1,.34065/.33767];var go=new se({id:"acescg",name:"ACEScg",coords:{r:{range:[0,65504],name:"Red"},g:{range:[0,65504],name:"Green"},b:{range:[0,65504],name:"Blue"}},referred:"scene",white:Vt.ACES,toXYZ_M:[[.6624541811085053,.13400420645643313,.1561876870049078],[.27222871678091454,.6740817658111484,.05368951740793705],[-.005574649490394108,.004060733528982826,1.0103391003129971]],fromXYZ_M:[[1.6410233796943257,-.32480329418479,-.23642469523761225],[-.6636628587229829,1.6153315916573379,.016756347685530137],[.011721894328375376,-.008284441996237409,.9883948585390215]],formats:{color:{}}});const yo=2**-16,vo=-.35828683,bo=(Math.log2(65504)+9.72)/17.52;var wo=new se({id:"acescc",name:"ACEScc",coords:{r:{range:[vo,bo],name:"Red"},g:{range:[vo,bo],name:"Green"},b:{range:[vo,bo],name:"Blue"}},referred:"scene",base:go,toBase:t=>t.map((function(t){return t<=-.3013698630136986?2*(2**(17.52*t-9.72)-yo):t<bo?2**(17.52*t-9.72):65504})),fromBase:t=>t.map((function(t){return t<=0?(Math.log2(yo)+9.72)/17.52:t<yo?(Math.log2(yo+.5*t)+9.72)/17.52:(Math.log2(t)+9.72)/17.52})),formats:{color:{}}}),_o=Object.freeze({__proto__:null,XYZ_D65:ie,XYZ_D50:pe,XYZ_ABS_D65:sr,Lab_D65:Qe,Lab:ye,LCH:be,sRGB_Linear:Le,sRGB:Ue,HSL:Wr,HWB:Fr,HSV:Zr,P3_Linear:Be,P3:He,A98RGB_Linear:Vr,A98RGB:Jr,ProPhoto_Linear:Kr,ProPhoto:Qr,REC_2020_Linear:Re,REC_2020:Oe,OKLab:jr,OKLCH:to,Jzazbz:wr,JzCzHz:_r,ICTCP:Nr,REC_2100_PQ:so,REC_2100_HLG:uo,ACEScg:go,ACEScc:wo}),$o=new WeakMap;class Mo{constructor(...t){let e,r,o,s;Bt(this,$o,{writable:!0,value:void 0}),1===t.length&&(e=le(t[0])),e?(r=e.space||e.spaceId,o=e.coords,s=e.alpha):[r,o,s]=t,Rt(this,$o,re.get(r)),this.coords=o?o.slice():[0,0,0],this.alpha=s<1?s:1;for(let t=0;t<this.coords.length;t++)"NaN"===this.coords[t]&&(this.coords[t]=NaN);for(let t in Pt(this,$o).coords)Object.defineProperty(this,t,{get:()=>this.get(t),set:e=>this.set(t,e)})}get space(){return Pt(this,$o)}get spaceId(){return Pt(this,$o).id}clone(){return new Mo(this.space,this.coords,this.alpha)}toJSON(){return{spaceId:this.spaceId,coords:this.coords,alpha:this.alpha}}display(...t){let e=function(t,{space:e=Ft.display_space,...r}={}){let o=Pe(t,r);if("undefined"==typeof CSS||CSS.supports("color",o)||!Ft.display_space)o=new String(o),o.color=t;else{let s=Se(t,e);o=new String(Pe(s,r)),o.color=s}return o}(this,...t);return e.color=new Mo(e.color),e}static get(t,...e){return t instanceof Mo?t:new Mo(t,...e)}static defineFunction(t,e,r=e){let{instance:o=!0,returns:s}=r,i=function(...t){let r=e(...t);if("color"===s)r=Mo.get(r);else if("function<color>"===s){let t=r;r=function(...e){let r=t(...e);return Mo.get(r)},Object.assign(r,t)}else"array<color>"===s&&(r=r.map((t=>Mo.get(t))));return r};t in Mo||(Mo[t]=i),o&&(Mo.prototype[t]=function(...t){return i(this,...t)})}static defineFunctions(t){for(let e in t)Mo.defineFunction(e,t[e],t[e])}static extend(t){if(t.register)t.register(Mo);else for(let e in t)Mo.defineFunction(e,t[e])}}Mo.defineFunctions({get:he,getAll:ce,set:ue,setAll:de,to:Se,equals:function(t,e){return t=le(t),e=le(e),t.space===e.space&&t.alpha===e.alpha&&t.coords.every(((t,r)=>t===e.coords[r]))},inGamut:Ee,toGamut:ke,distance:Ie,toString:Pe}),Object.assign(Mo,{util:Wt,hooks:Zt,WHITES:Vt,Space:re,spaces:re.registry,parse:ae,defaults:Ft});for(let t of Object.keys(_o))re.register(_o[t]);for(let t in re.registry)Ao(t,re.registry[t]);function Ao(t,e){Object.keys(e.coords),Object.values(e.coords).map((t=>t.name));let r=t.replace(/-/g,"_");Object.defineProperty(Mo.prototype,r,{get(){let r=this.getAll(t);return"undefined"==typeof Proxy?r:new Proxy(r,{has:(t,r)=>{try{return re.resolveCoord([e,r]),!0}catch(t){}return Reflect.has(t,r)},get:(t,r,o)=>{if(r&&"symbol"!=typeof r&&!(r in t)){let{index:o}=re.resolveCoord([e,r]);if(o>=0)return t[o]}return Reflect.get(t,r,o)},set:(r,o,s,i)=>{if(o&&"symbol"!=typeof o&&!(o in r)||o>=0){let{index:i}=re.resolveCoord([e,o]);if(i>=0)return r[i]=s,this.setAll(t,r),!0}return Reflect.set(r,o,s,i)}})},set(e){this.setAll(t,e)},configurable:!0,enumerable:!0})}Zt.add("colorspace-init-end",(t=>{Ao(t.id,t),t.aliases?.forEach((e=>{Ao(e,t)}))})),Mo.extend(Dr),Mo.extend({deltaE:Ur}),Mo.extend(Hr),Mo.extend({contrast:function(t,e,r={}){jt(r)&&(r={algorithm:r});let{algorithm:o,...s}=r;if(!o){let t=Object.keys(er).map((t=>t.replace(/^contrast/,""))).join(", ");throw new TypeError(`contrast() function needs a contrast algorithm. Please specify one of: ${t}`)}t=le(t),e=le(e);for(let r in er)if("contrast"+o.toLowerCase()===r.toLowerCase())return er[r](t,e,s);throw new TypeError(`Unknown contrast algorithm: ${o}`)}}),Mo.extend(nr),Mo.extend(Ye),Mo.extend(Gr),Mo.extend(er);const xo=["goldenrod","peachpuff","aqual","lightcoral","greenyellow","plum"],Eo=[a`:host{position:relative;display:block;height:100%;width:100%}#stage ::slotted(*){transition:all ${.25}s ease-in-out}`];[...Array(xo.length).keys()].forEach((t=>{const e=a`#stage.exploded ::slotted(:nth-child(${t+1})){border:3px solid ${s(xo[t])};transform:rotateX(${60}deg) rotateY(${15}deg) rotateZ(${-60}deg) translate3d(${-30}px,${35}px,${0+30*t}px) scale(${.5});transition:all ${.25}s ease-in-out}`;Eo.push(e)}));const Co=a`.ps-checkerboard{background-color:var(--spectrum-colorcontrol-checkerboard-light-color,var(--spectrum-global-color-static-white));background-image:linear-gradient(-45deg,transparent 75.5%,var(--spectrum-colorcontrol-checkerboard-dark-color,var(--spectrum-global-color-static-gray-300)) 75.5%),linear-gradient(45deg,transparent 75.5%,var(--spectrum-colorcontrol-checkerboard-dark-color,var(--spectrum-global-color-static-gray-300)) 75.5%),linear-gradient(-45deg,var(--spectrum-colorcontrol-checkerboard-dark-color,var(--spectrum-global-color-static-gray-300)) 25.5%,transparent 25.5%),linear-gradient(45deg,var(--spectrum-colorcontrol-checkerboard-dark-color,var(--spectrum-global-color-static-gray-300)) 25.5%,transparent 25.5%);background-size:20px 20px;background-position:0 0,0 10px,10px -10px,-10px 0}`;class ko{setDocument(t){this.document=t}}class So extends ko{getToolId(){return So.toolId}onToolDown(t){console.log(this.constructor.name,"onToolDown",t)}onToolMove(t){console.log(this.constructor.name,"onToolMove",t)}onToolUp(t){console.log(this.constructor.name,"onToolUp",t)}}So.toolId="null";class Po extends ot{registerTool(t){this.tools[t.getToolId()]=t,t.setDocument(this)}setTool(t){const e=this.tools[t];if(!e)throw new Error(`unregistered tool ${t}`);this.activeTool=e}setActiveLayer(t){this.activeLayer&&(this.activeLayer.classList.remove("targeted"),this.activeLayer.editing=!1),this.activeLayer=t,this.activeLayer.editing=!0,this.activeLayer.classList.add("targeted")}constructor(){super(),this.mode="rgb",this.depth=8,this.resolution=72,this.fill="transparent",this.width=500,this.height=400,this.tx=0,this.ty=0,this.scale=1,this.exploded=!1,this.tools={},this.activeTool=new So,this.addEventListener("pointerdown",this.onPointerDown),this.addEventListener("pointermove",this.onPointerMove),this.addEventListener("pointerup",this.onPointerUp),this.fgColor=new Mo("white"),this.bgColor=new Mo("black"),this.layers=[]}firstUpdated(){var t;const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("slot");"layers"===e.name?e.addEventListener("slotchange",(()=>{const t=e.assignedNodes().filter((t=>t instanceof Ct));t.filter((t=>!this.layers.includes(t))).forEach((t=>{t.setDocument(this)}));const r=this.layers.filter((e=>!t.includes(e)));r.forEach((t=>{t.setDocument(void 0)})),this.layers=t})):console.error("wrong slot",e)}eventToDocument(t){return this.viewToDocument(t.offsetX,t.offsetY)}viewToDocumentMatrix(){const t=(e=new wt(9),wt!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e);var e;return _t(t,t,Mt(this.clientWidth/2,this.clientHeight/2)),function(t,e,r){var o=r[0],s=r[1];t[0]=o*e[0],t[1]=o*e[1],t[2]=o*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8]}(t,t,Mt(1/this.scale,1/this.scale)),_t(t,t,Mt(-this.tx,-this.ty)),_t(t,t,Mt(-this.clientWidth/2,-this.clientHeight/2)),t}viewToDocument(t,e){const r=$t();return At(r,Mt(t,e),this.viewToDocumentMatrix()),function(t,e){t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1])}(r,r),r}async animateTransform(t,e,r,o,s){await Et(this.stage,"transform",t,(()=>{this.tx=e,this.ty=r,this.scale=o}),s)}render(){const t={"ps-checkerboard":!this.exploded,exploded:this.exploded},e={width:`${this.width}px`,height:`${this.height}px`,transform:`translate(${this.tx}px, ${this.ty}px) scale(${this.scale})`,position:"relative"};return j` <div id="stage" class="${gt(t)}" style="${bt(e)}"> <slot name="layers"></slot> <slot name="selection"></slot> ${this.activeTool.overlay} </div> `}onPointerDown(t){const e=t.target;e&&e.setPointerCapture(t.pointerId),this.activeTool.onToolDown(t)}onPointerMove(t){t.target.hasPointerCapture(t.pointerId)&&this.activeTool.onToolMove(t)}onPointerUp(t){const e=t.target;e.hasPointerCapture(t.pointerId)&&e.releasePointerCapture(t.pointerId),this.activeTool.onToolUp(t)}}Po.styles=[...Eo,Co,a`:host{display:inline-block;position:absolute;background-color:var(--spectrum-global-color-static-gray-300)}::slotted([slot=layers]){position:absolute;pointer-events:none}::slotted(ft-selection){position:absolute}#stage{touch-action:none;pointer-events:auto;overflow:hidden;transform-origin:inherit}`],t([st({attribute:!1})],Po.prototype,"fill",void 0),t([st({attribute:!1})],Po.prototype,"width",void 0),t([st({attribute:!1})],Po.prototype,"height",void 0),t([st({attribute:!1})],Po.prototype,"tx",void 0),t([st({attribute:!1})],Po.prototype,"ty",void 0),t([st({attribute:!1})],Po.prototype,"scale",void 0),t([ut({slot:"selection",selector:"ft-selection"})],Po.prototype,"selection",void 0),t([st({attribute:!1})],Po.prototype,"exploded",void 0),t([ct("#stage")],Po.prototype,"stage",void 0),t([at()],Po.prototype,"activeTool",void 0),window.customElements.define("ft-document",Po);class Ro extends ot{constructor(){super(...arguments),this.exploded=!1}}t([st({attribute:!1})],Ro.prototype,"exploded",void 0);export{U as A,Ro as B,kt as F,t as _,ct as a,Ct as b,bt as c,Et as d,st as e,a as i,ut as l,lt as o,ot as s,at as t,j as x};
